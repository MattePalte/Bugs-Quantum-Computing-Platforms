{"commit_hash": "504bdbb9bb30249d85ecf7ba199b047150ee33f3", "commit_msg": "Fix behavior of MergeInteractions for tagged partial CZ gates (#4288)\n\n* Add test for the failing case with a tagged operation\r\n\r\n* Fix merge interactions for tagged operation", "project_name": "Cirq", "id": "1612", "human_id": "Cirq#4288", "annotator_comment": "Reporter: \"MergeInteractions checks for isinstance(op, GateOperation) if allowe_partial_czs = False and hence it doesn't behave well with TaggedOperations.\" Fixer: :\"MergeInteractions skips merging CZ gates if there are already equal or fewer in a sequence than the synthesized result (to prevent increasing the gate count). Previously, a tagged partial CZ gate could slip through and not be optimized even if allow_partial_czs=False.\""}