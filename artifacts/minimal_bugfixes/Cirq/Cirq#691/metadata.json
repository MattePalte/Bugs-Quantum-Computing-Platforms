{"commit_hash": "342bcc3cfe455e403dbf51a3bf71e85211c3cf36", "commit_msg": "Fix sign error in EjectFullW and silent merge error in eject_z_test.py (#691)\n\n- Slipped by because of a silent merge conflict overwriting updated methods with old ones\r\n- The old methods were calling the new \"canonicalize_up_to_measurement_phase\" with the wrong number of arguments, triggering a type error, triggering a path expecting a type error for a *different reason* (i.e. non-unitary operations in the circuit)\r\n- Removed the non-unitary fallback path and renamed the method to make it clear only measurement-implies-terminal circuits were expected\r\n- Simplified the W-over-partial-W derivation\r\n- Fixed false-positive assertions that were now correctly failing\r\n- Added a test that fails for the old behavior but not for the new behavior\r\n\r\nFixes https://github.com/quantumlib/Cirq/issues/684", "project_name": "Cirq", "id": "1331", "human_id": "Cirq#691", "annotator_comment": "The optimizer uses a wrong axis_half_turns parameters, the  formula passed there is wrong."}