Fix ReduceBarriers to be applied before truncation (#693)