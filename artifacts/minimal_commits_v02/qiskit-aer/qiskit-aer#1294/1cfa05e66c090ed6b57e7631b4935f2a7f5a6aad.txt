fix a bug to generate a diagonal gate in the end of circuit (#1294)