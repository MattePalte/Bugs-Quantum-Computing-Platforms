From issue reporter: "Bug: The mapper sometimes reuses a measured qubit for further operation. This is rejected by real backends. It is, however, functionally correct because the measured qubit is only used as a swap intermediary." From bug-fixer: "If compilation is being performed for a real backend, the compiler inserts barriers before measurements to ensure they do not move before gates."