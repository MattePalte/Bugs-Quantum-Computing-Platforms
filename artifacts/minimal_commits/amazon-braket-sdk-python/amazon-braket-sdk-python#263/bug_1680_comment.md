A tensor product can be initialized with a list of obeservables, but some obserable can be TensorProduct, which than include other observables within themselves. Therefore a flattening is required to have a TensorProduct represented as a flat list of the observables in it. The bug-fix propose a flattening routine to obtain the atomic observable of each TensorProduct during initialization. The observables give the measurement context.